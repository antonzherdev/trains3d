import EGBentleyOttmann
import CNTest
import EGFigure
import EGTypes


class EGBentleyOttmannTest extends CNTestCase {
    def testMain {
        val r = EGBentleyOttmann.intersectionsFor([
            (1, EGLineSegment.newWith(-1, -1, 2, 2)),
            (2, EGLineSegment.newWith(-2, 1, 2, 1)),
            (3, EGLineSegment.newWith(-2, 2, 1, -1))
        ])
        val e = [
            EGBentleyOttmannIntersection(1, 2, EGPoint(1, 1)),
            EGBentleyOttmannIntersection(1, 3, EGPoint(0, 0)),
            EGBentleyOttmannIntersection(2, 3, EGPoint(-1, 1))
        ]
        assertEquals(e, r)
    }

    def testNoCross {
        var r = EGBentleyOttmann.intersectionsFor([
            (1, EGLineSegment.newWith(-1, -1, 2, 2)),
            (3, EGLineSegment.newWith(-2, 2, 0, 0))
        ])
        assertEquals([], r)
    }

    def testVertical {
        var r = EGBentleyOttmann.intersectionsFor([
            (1, EGLineSegment.newWith(-1, -1, 2, 2)),
            (2, EGLineSegment.newWith(1, -2, 1, 2))
        ])
        val e = [
            EGBentleyOttmannIntersection(1, 2, EGPoint(1, 1))
        ]
        assertEquals(e, r)
    }
}