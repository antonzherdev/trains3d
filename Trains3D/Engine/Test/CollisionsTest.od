package com.antonzherdev.eg

import com.antonzherdev.test._

class CollisionsTest extends TestCase {
    def testCollisions {
        val world = CollisionWorld<int>()
        val box1 = CollisionBody<int>(1, CollisionBox(1, 1, 1), isKinematic = true)
        val box2 = CollisionBody<int>(2, CollisionBox(1, 1, 1), isKinematic = false)
        world.add(box1)
        world.add(box2)
        box1.translate(1.8, 1.8, 0)
        assertTrue(world.detect.count == 1)
        box1.translate(0.1, 0.1, 0)
        assertTrue(world.detect.count == 1)

        box1.translate(0.2, 0.2, 0)
        assertTrue(world.detect.isEmpty)
    }

    def testCollisions2d {
        val world = CollisionWorld<int>()
        val box1 = CollisionBody<int>(1, CollisionBox2d(1, 1), isKinematic = true)
        val box2 = CollisionBody<int>(2, CollisionBox2d(1, 1), isKinematic = false)
        world.add(box1)
        world.add(box2)
        box1.translate(1.8, 1.8, 0)
        assertTrue(world.detect.count == 1)
        box1.translate(0.1, 0.1, 0)
        assertTrue(world.detect.count == 1)

        box1.translate(0.2, 0.2, 0)
        assertTrue(world.detect.isEmpty)
    }
}
