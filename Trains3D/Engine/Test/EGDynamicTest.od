package com.antonzherdev.eg

import test._

class EGDynamicTest extends CNTestCase {
    def testSimple {
        val world = EGDynamicWorld<int>(EGVec3(0, -10, 0))
        val shape = EGCollisionBox(EGVec3(0.5, 0.5, 0.5))
        val body = EGDynamicBody<int>(1, shape, isKinematic = true, 1)
        world.add(body)

        var m = body.matrix
        assertTrue(m.array[13] == 0)

        var v = body.velocity
        assertEquals(v, EGVec3(0, 0, 0))

        30.range.for(world.updateWith(delta = 1.0/30.0))
        m = body.matrix
        assertTrue(m.array[13].between(-5.1, -4.99))

        v = body.velocity
        assertTrue(v.x == 0)
        assertTrue(v.y.between(-10.01, -9.99))
        assertTrue(v.z == 0)
    }
}
