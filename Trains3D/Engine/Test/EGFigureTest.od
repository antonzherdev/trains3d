import CNTest

import EGFigure
import EGTypes

class EGFigureTest extends CNTestCase {
    def testThickLine {
        var l = EGThickLineSegment(EGLineSegment(EGPoint(0, 0), EGPoint(1, 0)), 1)
        assertEquals(l.boundingRect, EGRect(0, 1, -0.5, 1))
        var p = EGPolygon([EGPoint(0, 0.5), EGPoint(0, -0.5), EGPoint(1, -0.5), EGPoint(1, 0.5)])
        assertEquals(l.segments.toSet, p.segments.toSet)

        l = EGThickLineSegment(EGLineSegment(EGPoint(0, 0), EGPoint(0, 1)), 1)
        assertEquals(l.boundingRect, EGRect(-0.5, 1, 0, 1))
        p = EGPolygon([EGPoint(0.5, 0), EGPoint(-0.5, 0), EGPoint(-0.5, 1), EGPoint(0.5, 1)])
        assertEquals(l.segments.toSet, p.segments.toSet)

        val s2 = sqrt(2)
        l = EGThickLineSegment(EGLineSegment(EGPoint(0, 0), EGPoint(1, 1)), s2)
        assertEquals(l.boundingRect, EGRect(0, 1, 0, 1).thicken(s2/2, s2/2))
        p = EGPolygon([EGPoint(-0.5, 0.5), EGPoint(0.5, 1.5), EGPoint(1.5, 0.5), EGPoint(0.5, -0.5)])
        assertEquals(l.segments.toSet, p.segments.toSet)
    }
}