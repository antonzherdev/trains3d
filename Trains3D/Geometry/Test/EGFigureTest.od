package com.antonzherdev.geometry

import test._
import core.ODMath._

class EGFigureTest extends CNTestCase {
    def testThickLine {
        var l = EGThickLineSegment(EGLineSegment(EGVec2(0, 0), EGVec2(1, 0)), 1)
        assertEquals(l.boundingRect, EGRect(0, 1, -0.5, 1))
        var p = EGPolygon([EGVec2(0, 0.5), EGVec2(0, -0.5), EGVec2(1, -0.5), EGVec2(1, 0.5)])
        assertEquals(l.segments.toSet, p.segments.toSet)

        l = EGThickLineSegment(EGLineSegment(EGVec2(0, 0), EGVec2(0, 1)), 1)
        assertEquals(l.boundingRect, EGRect(-0.5, 1, 0, 1))
        p = EGPolygon([EGVec2(0.5, 0), EGVec2(-0.5, 0), EGVec2(-0.5, 1), EGVec2(0.5, 1)])
        assertEquals(l.segments.toSet, p.segments.toSet)

        val s2 = sqrt(2)
        l = EGThickLineSegment(EGLineSegment(EGVec2(0, 0), EGVec2(1, 1)), s2)
        assertEquals(l.boundingRect, EGRect(0, 1, 0, 1).thicken(s2/2, s2/2))
        p = EGPolygon([EGVec2(-0.5, 0.5), EGVec2(0.5, 1.5), EGVec2(1.5, 0.5), EGVec2(0.5, -0.5)])
        assertEquals(l.segments.toSet, p.segments.toSet)
    }
}