package com.antonzherdev.geometry

import test._
import core.ODMath._

class FigureTest extends CNTestCase {
    def testThickLine {
        var l = ThickLineSegment(LineSegment(Vec2(0, 0), Vec2(1, 0)), 1)
        assertEquals(l.boundingRect, Rect(0, 1, -0.5, 1))
        var p = Polygon([Vec2(0, 0.5), Vec2(0, -0.5), Vec2(1, -0.5), Vec2(1, 0.5)])
        assertEquals(l.segments.toSet, p.segments.toSet)

        l = ThickLineSegment(LineSegment(Vec2(0, 0), Vec2(0, 1)), 1)
        assertEquals(l.boundingRect, Rect(-0.5, 1, 0, 1))
        p = Polygon([Vec2(0.5, 0), Vec2(-0.5, 0), Vec2(-0.5, 1), Vec2(0.5, 1)])
        assertEquals(l.segments.toSet, p.segments.toSet)

        val s2 = sqrt(2)
        l = ThickLineSegment(LineSegment(Vec2(0, 0), Vec2(1, 1)), s2)
        assertEquals(l.boundingRect, Rect(0, 1, 0, 1).thicken(s2/2, s2/2))
        p = Polygon([Vec2(-0.5, 0.5), Vec2(0.5, 1.5), Vec2(1.5, 0.5), Vec2(0.5, -0.5)])
        assertEquals(l.segments.toSet, p.segments.toSet)
    }
}